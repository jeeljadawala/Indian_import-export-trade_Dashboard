<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <script src="https://d3js.org/d3.v4.js"></script>
  <script src="https://d3js.org/d3-scale-chromatic.v0.3.min.js"></script>
  <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" data-auto-a11y="true"></script>


  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

  <!--libraries for bootstrap-->
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>

  <title>Dashboard</title>
  <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" data-auto-replace-svg="nest"></script>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" />
  <!-- Google Fonts Roboto -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" />
  <!-- MDB -->
  <link rel="stylesheet" href="css/mdb.min.css" />
  <!-- Custom styles -->
  <link rel="stylesheet" href="css/admin.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"
    integrity="sha512-d9xgZrVZpmmQlfonhQUvTR7lMPtO7NkZMkA0ABN3PHCbKA5nqylQ/yWlFAyY6hYgdF1Qh6nYiuADWwKB4C2WSw=="
    crossorigin="anonymous"></script>
</head>

<body>
  <!--Main Navigation-->
  <header>
    <!-- Sidebar -->
    <nav id="sidebarMenu" class="collapse d-lg-block sidebar collapse bg-white">
      <div class="position-sticky">
        <div class="list-group list-group-flush mx-3 mt-4">
          <a href="#title" class="list-group-item list-group-item-action py-2 ripple" aria-current="true">
            <i class="fas fa-tachometer-alt fa-fw me-3"></i><span>Main dashboard</span>
          </a>

          <a href="#barAnimated" class="list-group-item list-group-item-action py-2 ripple" aria-current="true">
            <i class="far fa-chart-bar fa-fw me-3"></i><span>Column Chart</span>
          </a>

          <a href="#donut" class="list-group-item list-group-item-action py-2 ripple"><i
              class="fas fa-dot-circle fa-fw me-3"></i>
            <span> DonutChart</span></a>
          <a href="#stackArea" class="list-group-item list-group-item-action py-2 ripple"><i
              class="fas fa-chart-area fa-fw me-3"></i><span>StackAreaChart</span></a>
          <a href="#horizontalBar" class="list-group-item list-group-item-action py-2 ripple">
            <i class="fa fa-bars fa-fw me-3" aria-hidden="true"></i>
            <span>BarChart</span>
          </a>
          <a href="#bubble" class="list-group-item list-group-item-action py-2 ripple"><i
              class="fas fa-chart-bar fa-fw me-3"></i><span>BubbleChart</span></a>
          <a href="#multiLine" class="list-group-item list-group-item-action py-2 ripple">
            <i class="fas fa-chart-line fa-fw me-3"></i><span>MultiLineChart</span></a>
          <a href="#Histogram" class="list-group-item list-group-item-action py-2 ripple"><i
              class="far fa-chart-bar fa-fw me-3"></i>
            <span>Histogram</span></a>

          <a href="./heatmap.html" class="list-group-item list-group-item-action py-2 ripple" role="button"><i
              class="fas fa-th fa-fw me-3"></i>Heatmap</a>

          <a href="./pie.html" class="list-group-item list-group-item-action py-2 ripple" role="button"><i
              class="fa fa-chart-pie fa-fw me-3"></i>Pie Chart</a>

          <a href="./waterfall.html" class="list-group-item list-group-item-action py-2 ripple" role="button"><i
              class="fas fa-water fa-fw me-3"></i>Waterfall Chart</a>

          <!--<a href="#" class="list-group-item list-group-item-action py-2 ripple"><i
              class="fas fa-money-bill fa-fw me-3"></i><span>Sales</span></a>-->
        </div>
      </div>
    </nav>
    <!-- Sidebar -->

    <!-- Navbar -->
    <nav id="main-navbar" class="navbar navbar-expand-lg navbar-light bg-white fixed-top">
      <!-- Container wrapper -->
      <div class="container-fluid">
        <!-- Toggle button -->
        <button class="navbar-toggler" type="button" data-mdb-toggle="collapse" data-mdb-target="#sidebarMenu"
          aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
          <i class="fas fa-bars"></i>
        </button>

        <!-- Brand -->
        <a class="navbar-brand" href="#">
          <i class="fas fa-tachometer-alt"></i>
        </a>
        <!-- Search form -->
        <form class="d-none d-md-flex input-group w-auto my-auto">
          <input autocomplete="off" type="search" class="form-control rounded"
            placeholder='Search (ctrl + "/" to focus)' style="min-width: 225px" />
          <span class="input-group-text border-0"><i class="fas fa-search"></i></span>
        </form>

        <!-- Right links -->
        <ul class="navbar-nav ms-auto d-flex flex-row">
          <!-- Notification dropdown -->
          <li class="nav-item dropdown">
            <a class="nav-link me-3 me-lg-0 dropdown-toggle hidden-arrow" href="#" id="navbarDropdownMenuLink"
              role="button" data-mdb-toggle="dropdown" aria-expanded="false">
              <i class="fas fa-bell"></i>
              <span class="badge rounded-pill badge-notification bg-danger">1</span>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuLink">
              <li><a class="dropdown-item" href="#">Some news</a></li>
              <li><a class="dropdown-item" href="#">Another news</a></li>
              <li>
                <a class="dropdown-item" href="#">Something else</a>
              </li>
            </ul>
          </li>

          <!-- Icon -->
          <li class="nav-item">
            <a class="nav-link me-3 me-lg-0" href="#">
              <i class="fas fa-fill-drip"></i>
            </a>
          </li>
          <!-- Icon -->
          <li class="nav-item me-3 me-lg-0">
            <a class="nav-link" href="#">
              <i class="fab fa-github"></i>
            </a>
          </li>

          <!-- Icon dropdown -->
          <li class="nav-item dropdown">
            <a class="nav-link me-3 me-lg-0 dropdown-toggle hidden-arrow" href="#" id="navbarDropdown" role="button"
              data-mdb-toggle="dropdown" aria-expanded="false">
              <i class="united kingdom flag m-0"></i>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
              <li>
                <a class="dropdown-item" href="#"><i class="united kingdom flag"></i>English
                  <i class="fa fa-check text-success ms-2"></i></a>
              </li>
              <li>
                <hr class="dropdown-divider" />
              </li>
              <li>
                <a class="dropdown-item" href="#"><i class="poland flag"></i>Polski</a>
              </li>
              <li>
                <a class="dropdown-item" href="#"><i class="china flag"></i>中文</a>
              </li>
              <li>
                <a class="dropdown-item" href="#"><i class="japan flag"></i>日本語</a>
              </li>
              <li>
                <a class="dropdown-item" href="#"><i class="germany flag"></i>Deutsch</a>
              </li>
              <li>
                <a class="dropdown-item" href="#"><i class="france flag"></i>Français</a>
              </li>
              <li>
                <a class="dropdown-item" href="#"><i class="spain flag"></i>Español</a>
              </li>
              <li>
                <a class="dropdown-item" href="#"><i class="russia flag"></i>Русский</a>
              </li>
              <li>
                <a class="dropdown-item" href="#"><i class="portugal flag"></i>Português</a>
              </li>
            </ul>
          </li>

          <!-- Avatar -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle hidden-arrow d-flex align-items-center" href="#"
              id="navbarDropdownMenuLink" role="button" data-mdb-toggle="dropdown" aria-expanded="false">
              <i class="fas fa-user-circle"></i>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuLink">
              <li><a class="dropdown-item" href="#">My profile</a></li>
              <li><a class="dropdown-item" href="#">Settings</a></li>
              <li><a class="dropdown-item" href="#">Logout</a></li>
            </ul>
          </li>
        </ul>
      </div>
      <!-- Container wrapper -->
    </nav>
    <!-- Navbar -->
  </header>
  <!--Main Navigation-->

  <!--Main layout-->
  <main style="margin-top: 58px">
    <div class="container pt-4">
      <!-- Section: Main chart -->

      <section class="mb-4">
        <h2 style="color:rgb(85, 39, 39);font-size:500%;font-family:Times New Roman;text-align:center">Import-Export
          Trade Of India Dashboard</h2>

        <div class="container" id="title"></div>


      </section>


      <section class="mb-4">
        <h2>Export vs Year</h2>

        <!-- Create a div where the graph will take place -->

        <button onclick="update('value_e')">Country</button>
        <button onclick="update('value_i')">Category</button>

        <div id="barAnimated"></div>


      </section>
      <section class="mb-4">
        <h2>Category Contribution in Import </h2>

        <div class="container" id="donut"></div>


      </section>
      <section class="mb-4">
        <h2>Quantity vs Year wrt Categories</h2>

        <div class="container" id="stackArea"></div>


      </section>
      <section class="mb-4">
        <h2>Top 5 Export Partner</h2>

        <div class="container" id="horizontalBar"></div>


      </section>
      </section>

      <section class="mb-4">
        <h2>Max. Export Trade of Category vs Year wrt Quantity</h2>
        <br><br>
        <div class="container" id="bubble"></div>
      </section>
      <section class="mb-4">
        <h2>Import Vs Export</h2>

        <div class="container" id="multiLine"></div>


      </section>
      <section class="mb-4">
        <h2>Analysis of Per unit price</h2>
        <div class="container" id="Histogram"></div>
        <p>
          <label>No. of bins</label>
          <input type="number" min="1" max="100" step="30" value="20" id="nBin">
        </p>
      </section>
      <section></section>

      <!--<a href="./heatmap.html" id="heatmap_1" class="btn btn-primary" role="button">Next</a>-->

      <section class="mb-4">

        <br>
        <br>
        <h2>Technologies and References Used</h2>
        <section>
          <div class="row">
            <div class="col-xl-3 col-sm-6 col-12 mb-4">
              <div class="card">
                <div class="card-body">
                  <div class="d-flex justify-content-between px-md-1">
                    <div class="align-self-center">
                      <i class="fab fa-youtube text-danger fa-7x"></i>

                    </div>
                    <div class="text-end">

                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-sm-6 col-12 mb-4">
              <div class="card">
                <div class="card-body">
                  <div class="d-flex justify-content-between px-md-1">
                    <div class="align-self-center">
                      <img src="./img/d3.png" style="width:110px;height:110px;" />
                    </div>
                    <div class="text-end">


                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-sm-6 col-12 mb-4">
              <div class="card">
                <div class="card-body">
                  <div class="d-flex justify-content-between px-md-1">
                    <div class="align-self-center">
                      <i unicode="f13b" class="fab fa-html5 text-warning fa-7x"></i>

                    </div>

                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-sm-6 col-12 mb-4">
              <div class="card">
                <div class="card-body">
                  <div class="d-flex justify-content-between px-md-1">
                    <div class="align-self-center">
                      <i class="fab fa-css3-alt text-primary fa-7x"></i>
                    </div>
                    <div class="text-end">

                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xl-3 col-sm-6 col-12 mb-4">
              <div class="card">
                <div class="card-body">
                  <div class="d-flex justify-content-between px-md-1">
                    <div class="align-self-center">
                      <i class="fab fa-google text-success fa-7x"></i>

                    </div>

                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-sm-6 col-12 mb-4">
              <div class="card">
                <div class="card-body">
                  <div class="d-flex justify-content-between px-md-1">
                    <div>
                      <i class="fab fa-bootstrap text-info fa-7x"></i>
                    </div>
                    <div class="align-self-center">

                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-sm-6 col-12 mb-4">
              <div class="card">
                <div class="card-body">
                  <div class="d-flex justify-content-between px-md-1">
                    <div>
                      <i class="fas fa-code text-dark fa-7x"></i>
                    </div>
                    <div class="align-self-center">

                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-sm-6 col-12 mb-4">
              <div class="card">
                <div class="card-body">
                  <div class="d-flex justify-content-between px-md-1">
                    <div>
                      <i class="fab fa-js-square text-warning fa-7x"></i>
                    </div>
                    <div class="align-self-center">

                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

    </div>
  </main>
  <!--Main layout-->
  <!-- MDB -->
  <script type="text/javascript" src="js/mdb.min.js"></script>
  <!-- Custom scripts -->
  <script type="text/javascript" src="js/admin.js"></script>
  <script type="text/javascript" src="js/heatmap.js"></script>

  <script>

    //bar animated
    var path2 = "data.csv";

    // set the dimensions and margins of the graph
    var margin = { top: 30, right: 30, bottom: 70, left: 200 },
      width = 600 - margin.left - margin.right,
      height = 460 - margin.top - margin.bottom;

    // append the svg object to the body of the page
    var chart3 = d3.select("#barAnimated")
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform",
        "translate(" + margin.left + "," + margin.top + ")");

    // Initialize the X axis
    var x = d3.scaleBand()
      .range([0, width])
      .padding(0.2);
    var xAxis = chart3.append("g")
      .attr("transform", "translate(0," + height + ")")

    // Initialize the Y axis
    var y = d3.scaleLinear()
      .range([height, 0]);
    var yAxis = chart3.append("g")
      .attr("class", "myYaxis")


    // A function that create / update the plot for a given variable:
    function update(selectedVar) {

      // Parse the Data
      d3.csv(path2, function (data) {

        // X axis
        x.domain(data.map(function (d) { return d.year; }))
        xAxis.transition().duration(1000).call(d3.axisBottom(x))

        // Add Y axis
        y.domain([0, d3.max(data, function (d) { return +d[selectedVar] })]);
        yAxis.transition().duration(1000).call(d3.axisLeft(y));

        // variable u: map data to existing bars
        var u = chart3.selectAll("rect")
          .data(data)

        // update bars
        u
          .enter()
          .append("rect")
          .merge(u)
          .transition()
          .duration(1000)
          .attr("x", function (d) { return x(d.year); })
          .attr("y", function (d) { return y(d[selectedVar]); })
          .attr("width", x.bandwidth())
          .attr("height", function (d) { return height - y(d[selectedVar]); })
          .attr("fill", "#69b3a2")

        chart3.append("text")
          .attr("text-anchor", "end")
          .attr("x", width)
          .attr("y", height + margin.top + 25)
          .text("Year");

        // Y axis label:
        chart3.append("text")
          .attr("text-anchor", "end")
          .attr("transform", "rotate(-90)")
          .attr("y", -margin.left - 88)
          .attr("x", -margin.top)
          .text("Export Value")

      })

    }

    // Initialize plot
    update('value_e')


    //donut

    var margin = { top: 10, right: 120, bottom: 30, left: 50 },
      width = 960 - margin.left - margin.right,
      height = 410 - margin.top - margin.bottom,
      tooltip = { width: 100, height: 100, x: 10, y: -30 };
    //initialize margin end
    var chart5 = d3.select("#donut").append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

    var pie = d3.pie()
      .sort(null)
      .value(d => d.count_category_i);

    var arc = d3.arc()
      .innerRadius(Math.min(width, height) / 2 - 50)
      .outerRadius(Math.min(width, height) / 2 - 1)
      .cornerRadius(15);

    var arcLabel = function () {
      const radius = Math.min(width, height) / 2 * 0.9;
      return d3.arc().innerRadius(radius).outerRadius(radius);
    }

    d3.csv(path2, function (error, data) {
      if (error) throw error;
      data.forEach(function (d) {
        //    console.log(d);
        //     d.date = parseDate(d.date);
      });
      var color = d3.scaleOrdinal()
        .domain(data.map(d => d.categoryName))
        .range(d3.quantize(t => d3.interpolateSpectral(t * 0.8 + 0.1), data.length).reverse())
      const arcs = pie(data);
      chart5.append("g")
        .attr("stroke", "white")
        .selectAll("path")
        .data(arcs)
        .enter().append("path")
        .attr("fill", d => color(d.data.categoryName))
        .attr("d", arc)
        .append("title")
        .text(d => `${d.data.categoryName}: ${d.data.count_category_i.toLocaleString()}`);

      chart5.append("g")
        .attr("font-family", "sans-serif")
        .attr("font-size", 12)
        .attr("text-anchor", "middle")
        .selectAll("text")
        .data(arcs)
        .enter().append("text")
        .attr("transform", d => `translate(${arcLabel().centroid(d)})`)
        .call(text => text.append("tspan")
          .attr("y", "-0.4em")
          .attr("font-weight", "bold")
          .text(d => d.data.categoryName))
        .call(text => text.filter(d => (d.endAngle - d.startAngle) > 0.25).append("tspan")
          .attr("x", 0)
          .attr("y", "0.7em")
          .attr("fill-opacity", 0.7)
          .text(d => d.data.count_category_i.toLocaleString()));

    });





    //stack area
    // set the dimensions and margins of the graph

    var path = "export.csv";
    var margin = { top: 10, right: 40, bottom: 60, left: 80 },
      width = 580 - margin.left - margin.right,
      height = 400 - margin.top - margin.bottom;

    // append the svg object to the body of the page
    var chart4 = d3.select("#stackArea")
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform",
        "translate(" + margin.left + "," + margin.top + ")")


      ;

    //Read the data
    d3.csv(path, function (data) {

      // group the data: one array for each value of the X axis.
      var sumstat = d3.nest()
        .key(function (d) { return d.year; })
        .entries(data);

      // Stack the data: each group will be represented on top of each other
      var mygroups = ['Australia', 'Brazil', 'Canada', 'Switzerland', 'France', 'Germany', 'U S A', 'U Arab Emts', 'Thailand'] // list of group names
      var mygroup = [1, 2, 3, 4, 5, 6, 7, 8, 9] // list of group names
      var stackedData = d3.stack()
        .keys(mygroup)
        .value(function (d, key) {
          return d.values[key].quantity
        })

        (sumstat)

      // Add X axis --> it is a date format
      var x = d3.scaleLinear()
        .domain(d3.extent(data, function (d) { return d.year; }))
        .range([0, width]);
      chart4.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x).ticks(9));

      // Add Y axis
      var y = d3.scaleLinear()
        .domain([0, d3.max(data, function (d) { return +d.quantity; }) * 0.07])
        .range([height, 0]);
      chart4.append("g")
        .call(d3.axisLeft(y));

      // color palette
      var color = d3.scaleOrdinal()
        .domain(mygroups)
        .range(['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf', '#999999'])

      // Show the areas
      chart4
        .selectAll(".hover")
        .append("text")

        .text(d => `${d.quantity}`)


        .data(stackedData)
        .enter()
        .append("path")
        .on("mouseover", showTooltip)
        .on("mousemove", moveTooltip)
        .on("mouseleave", hideTooltip)

        .style("fill", function (d) { name = mygroups[d.key - 1]; return color(name); })



        .attr("d", d3.area()
          .x(function (d, i) { return x(d.data.key); })
          .y0(function (d) { return y(d[0]); })
          .y1(function (d) { return y(d[1]); })




        )

      var tooltip2 = d3.select("#stackArea")
        .append("div")
        .style("opacity", 0)
        .attr("class", "tooltip2")
        .style("background-color", "black")
        .style("border-radius", "5px")
        .style("padding", "10px")
        .style("color", "white")

      // -2- Create 3 functions to show / update (when mouse move but stay on same circle) / hide the tooltip
      var showTooltip = function (d) {
        tooltip2
          .transition()
          .duration(200)
        tooltip2
          .style("opacity", 1)
          .html("Quantity: " + d.year)
          .style("left", (d3.mouse(this)[0] + 20) + "px")
          .style("top", (d3.mouse(this)[1] + 20) + "px")
      }
      var moveTooltip = function (d) {
        tooltip2
          .style("left", (d3.mouse(this)[0] + 30) + "px")
          .style("top", (d3.mouse(this)[1] + 30) + "px")
      }
      var hideTooltip = function (d) {
        tooltip2
          .transition()
          .duration(200)
          .style("opacity", 0)
      }


      chart4.append("text")
        .attr("text-anchor", "end")
        .attr("x", width)
        .attr("y", height + margin.top + 20)
        .text("Year");

      // Y axis label:
      chart4.append("text")
        .attr("text-anchor", "end")
        .attr("transform", "rotate(-90)")
        .attr("y", -margin.left - 25)
        .attr("x", -margin.top)
        .text("Quantity")
      chart4.append("circle").attr("cx", 370).attr("cy", 105).attr("r", 6).style("fill", "#e41a1c")
      chart4.append("circle").attr("cx", 370).attr("cy", 120).attr("r", 6).style("fill", "#4daf4a")
      chart4.append("circle").attr("cx", 370).attr("cy", 135).attr("r", 6).style("fill", "#984ea3")
      chart4.append("circle").attr("cx", 370).attr("cy", 150).attr("r", 6).style("fill", "#ff7f00")
      chart4.append("circle").attr("cx", 370).attr("cy", 165).attr("r", 6).style("fill", "#ffff33")
      chart4.append("circle").attr("cx", 370).attr("cy", 180).attr("r", 6).style("fill", "#a65628")
      chart4.append("circle").attr("cx", 370).attr("cy", 195).attr("r", 6).style("fill", "#f781bf")
      chart4.append("circle").attr("cx", 370).attr("cy", 210).attr("r", 6).style("fill", "#69b3a2")
      chart4.append("circle").attr("cx", 370).attr("cy", 225).attr("r", 6).style("fill", "#999999")


      chart4.append("text").attr("x", 390).attr("y", 105).text("Chemicals").style("font-size", "15px").attr("alignment-baseline", "middle")
      chart4.append("text").attr("x", 390).attr("y", 120).text("Fertilizers").style("font-size", "15px").attr("alignment-baseline", "middle")

      chart4.append("text").attr("x", 390).attr("y", 135).text("Dyes").style("font-size", "15px").attr("alignment-baseline", "middle")

      chart4.append("text").attr("x", 390).attr("y", 150).text("Handicrafts").style("font-size", "15px").attr("alignment-baseline", "middle")

      chart4.append("text").attr("x", 390).attr("y", 165).text("Fabric Materials").style("font-size", "15px").attr("alignment-baseline", "middle")

      chart4.append("text").attr("x", 390).attr("y", 180).text("Plastic Products").style("font-size", "15px").attr("alignment-baseline", "middle")

      chart4.append("text").attr("x", 390).attr("y", 195).text("Rubber Products").style("font-size", "15px").attr("alignment-baseline", "middle")

      chart4.append("text").attr("x", 390).attr("y", 210).text("Metals").style("font-size", "15px").attr("alignment-baseline", "middle")

      chart4.append("text").attr("x", 390).attr("y", 225).text("Cosmetics").style("font-size", "15px").attr("alignment-baseline", "middle")




    })

    //horizontalbar

    // set the dimensions and margins of the graph
    var margin = { top: 20, right: 30, bottom: 30, left: 90 },
      width = 660 - margin.left - margin.right,
      height = 450 - margin.top - margin.bottom;

    // append the svg object to the body of the page
    var chart7 = d3.select("#horizontalBar")
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform",
        "translate(" + margin.left + "," + margin.top + ")");

    // Parse the Data
    d3.csv(path, function (data) {

      // Add X axis
      var x = d3.scaleLinear()
        .domain([0, 32300000000])
        .range([0, width + 200]);
      chart7.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x))
        .selectAll("text")
        .attr("transform", "translate(-10,0)rotate(-45)")
        .style("text-anchor", "end");

      // Y axis
      var y = d3.scaleBand()
        .range([0, height])
        .domain(data.map(function (d) { return d.country_name; }))
        .padding(.1);
      chart7.append("g")
        .call(d3.axisLeft(y))

      // Y axis label:
      chart7.append("text")
        .attr("text-anchor", "end")
        .attr("x", width + 25)
        .attr("y", height + margin.top + 35)
        .text("Value");

      // Y axis label:
      chart7.append("text")
        .attr("text-anchor", "end")
        .attr("transform", "rotate(-90)")
        .attr("y", -margin.left - 28)
        .attr("x", -margin.top)
        .text("Country")

      // gridlines in y axis function
      function make_x_gridlines() {
        return d3.axisBottom(y)
          .ticks(30)
      }

      // add the X gridlines
      chart7.append("g")
        .attr("class", "grid")
        .attr("transform", "translate(0," + height + ")")
        .call(make_x_gridlines()
          .tickSize(-height)
          .tickFormat("")
        )







      //Bars
      chart7.selectAll("myRect")
        .data(data)
        .enter()
        .append("rect")
        .attr("x", x(0))
        .attr("y", function (d) { return y(d.country_name); })
        .attr("width", function (d) { return x(d.Value); })
        .attr("height", y.bandwidth())
        .attr("fill", "#69b3a2")



    })



    //bubble

    // set the dimensions and margins of the graph
    var margin = { top: 10, right: 20, bottom: 50, left: 80 },
      width = 700 - margin.left - margin.right,
      height = 450 - margin.top - margin.bottom;

    // append the svg object to the body of the page
    var chart8 = d3.select("#bubble")
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform",
        "translate(" + margin.left + "," + margin.top + ")");

    //Read the data
    d3.csv(path, function (data) {

      // Add X axis
      var x = d3.scaleLinear()
        .domain(d3.extent(data, function (d) { return d.year; }))
        .range([0, width]);
      chart8.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));

      // Add Y axis
      var y = d3.scaleLinear()
        .domain([0, 5000000])
        .range([height, 0]);
      chart8.append("g")
        .call(d3.axisLeft(y));

      // Add a scale for bubble size
      var z = d3.scaleLinear()
        .domain([2000, 10000000])
        .range([4, 40]);

      // Add a scale for bubble color
      var myColor = d3.scaleOrdinal()
        .domain(["Bangladesh"])
        .range(d3.schemeSet2);

      // -1- Create a tooltip div that is hidden by default:
      var tooltip1 = d3.select("#bubble")
        .append("div")
        .style("opacity", 0)
        .attr("class", "tooltip1")
        .style("background-color", "black")
        .style("border-radius", "5px")
        .style("padding", "10px")
        .style("color", "white")

      // -2- Create 3 functions to show / update (when mouse move but stay on same circle) / hide the tooltip
      var showTooltip = function (d) {
        tooltip1
          .transition()
          .duration(200)
        tooltip1
          .style("opacity", 1)
          .html("categoryName: " + d.categoryName)
          .style("left", (d3.mouse(this)[0] + 20) + "px")
          .style("top", (d3.mouse(this)[1] + 20) + "px")
      }
      var moveTooltip = function (d) {
        tooltip1
          .style("left", (d3.mouse(this)[0] + 30) + "px")
          .style("top", (d3.mouse(this)[1] + 30) + "px")
      }
      var hideTooltip = function (d) {
        tooltip1
          .transition()
          .duration(200)
          .style("opacity", 0)
      }
      popData = data.filter(function (d) { return d.categoryName == "Fertilizers" })
      // Add dots
      chart8.append('g')
        .selectAll("dot")
        .data(data)
        .enter()
        .append("circle")
        .attr("class", "bubbles")
        .attr("cx", function (d) { return x(d.year); })
        .attr("cy", function (d) { return y(d.Value); })
        .attr("r", function (d) { return z(d.quantity); })
        .style("fill", function (d) { return myColor(d.categoryName); })
        // -3- Trigger the functions
        .on("mouseover", showTooltip)
        .on("mousemove", moveTooltip)
        .on("mouseleave", hideTooltip)



      chart8.append("text")
        .attr("text-anchor", "end")
        .attr("x", width)
        .attr("y", height + margin.top + 20)
        .text("Year");

      // Y axis label:
      chart8.append("text")
        .attr("text-anchor", "end")
        .attr("transform", "rotate(-90)")
        .attr("y", -margin.left - 20)
        .attr("x", -margin.top)
        .text("Quantity")

    })



    //multiLines

    // set the dimensions and margins of the graph
    var margin = { top: 10, right: 30, bottom: 30, left: 140 },
      width = 600 - margin.left - margin.right,
      height = 400 - margin.top - margin.bottom;

    // append the svg object to the body of the page
    var chart9 = d3.select("#multiLine")
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform",
        "translate(" + margin.left + "," + margin.top + ")");

    //Read the data
    d3.csv("data.csv", function (data) {

      // List of groups (here I have one group per column)
      var allGroup = ["value_e", "value_i"]

      // Reformat the data: we need an array of arrays of {x, y} tuples
      var dataReady = allGroup.map(function (grpName) { // .map allows to do something for each element of the list
        return {
          name: grpName,
          values: data.map(function (d) {
            return { year: d.year, value: +d[grpName] };
          })
        };
      });
      // I strongly advise to have a look to dataReady with
      // console.log(dataReady)

      // A color scale: one color for each group
      var myColor = d3.scaleOrdinal()
        .domain(allGroup)
        .range(d3.schemeSet2);

      // Add X axis --> it is a date format
      var x = d3.scaleLinear()
        .domain(d3.extent(data, function (d) { return d.year; }))
        .range([0, width]);
      chart9.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x).ticks(9));

      // Add Y axis
      var y = d3.scaleLinear()
        .domain([0, 110000000])
        .range([height, 0]);
      chart9.append("g")
        .call(d3.axisLeft(y));


      // gridlines in x axis function
      function make_x_gridlines() {
        return d3.axisBottom(x)
          .ticks(8)
      }

      // gridlines in y axis function
      function make_y_gridlines() {
        return d3.axisLeft(y)
          .ticks(11)
      }

      // add the X gridlines
      chart9.append("g")
        .attr("class", "grid")
        .attr("transform", "translate(0," + height + ")")
        .call(make_x_gridlines()
          .tickSize(-height)
          .tickFormat("")
        )

      // add the Y gridlines
      chart9.append("g")
        .attr("class", "grid")
        .call(make_y_gridlines()
          .tickSize(-width)
          .tickFormat("")
        )


      var tooltip9 = d3.select("#multiLine")
        .append("div")
        .style("opacity", 0)
        .attr("class", "tooltip9")
        .style("background-color", "black")
        .style("color", "white")
        .style("border", "solid")
        .style("border-width", "1px")
        .style("border-radius", "5px")
        .style("padding", "10px")



      // A function that change this tooltip when the user hover a point.
      // Its opacity is set to 1: we can now see it. Plus it set the text and position of tooltip depending on the datapoint (d)
      var mouseover = function (d) {
        tooltip9
          .style("opacity", 1)
      }

      var mousemove = function (d) {
        tooltip9
          .html("Value : " + d.value)
          .style("left", (d3.mouse(this)[0] + 90) + "px") // It is important to put the +90: other wise the tooltip is exactly where the point is an it creates a weird effect
          .style("top", (d3.mouse(this)[1]) + "px")
      }

      // A function that change this tooltip when the leaves a point: just need to set opacity to 0 again
      var mouseleave = function (d) {
        tooltip9
          .transition()
          .duration(200)
          .style("opacity", 0)
      }

      // Add the lines
      var line = d3.line()
        .x(function (d) { return x(+d.year) })
        .y(function (d) { return y(+d.value) })
      chart9.selectAll("myLines")
        .data(dataReady)
        .enter()
        .append("path")
        .attr("d", function (d) { return line(d.values) })
        .attr("stroke", function (d) { return myColor(d.name) })
        .style("stroke-width", 4)
        .style("fill", "none")

      // Add the points
      chart9
        // First we need to enter in a group
        .selectAll("myDots")
        .data(dataReady)
        .enter()
        .append('g')
        .style("fill", function (d) { return myColor(d.name) })
        // Second we need to enter in the 'values' part of this group
        .selectAll("myPoints")
        .data(function (d) { return d.values })
        .enter()
        .append("circle")
        .attr("cx", function (d) { return x(d.year) })
        .attr("cy", function (d) { return y(d.value) })
        .attr("r", 5)
        .attr("stroke", "white")
        .on("mouseover", mouseover)
        .on("mousemove", mousemove)
        .on("mouseleave", mouseleave)


      // Add a legend at the end of each line
      chart9
        .selectAll("myLabels")
        .data(dataReady)
        .enter()
        .append('g')
        .append("text")
        .datum(function (d) { return { name: d.name, value: d.values[8] }; }) // keep only the last value of each time series
        .attr("transform", function (d) { return "translate(" + x(d.value.year) + "," + y(d.value.value) + ")"; }) // Put the text at the position of the last point
        .attr("x", 12) // shift the text a bit more right
        .text(function (d) { return d.name; })
        .style("fill", function (d) { return myColor(d.name) })
        .style("font-size", 15)

      chart9.append("text")
        .attr("text-anchor", "end")
        .attr("x", width)
        .attr("y", height + margin.top + 20)
        .text("Year");

      // Y axis label:
      chart9.append("text")
        .attr("text-anchor", "end")
        .attr("transform", "rotate(-90)")
        .attr("y", -margin.left - 55)
        .attr("x", -margin.top)
        .text("Value")

    })


    //histogram 

    // set the dimensions and margins of the graph
    var margin = { top: 10, right: 30, bottom: 30, left: 40 },
      width = 460 - margin.left - margin.right,
      height = 400 - margin.top - margin.bottom;

    // append the svg object to the body of the page
    var chart10 = d3.select("#Histogram")
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform",
        "translate(" + margin.left + "," + margin.top + ")");

    // get the data
    d3.csv("export.csv", function (data) {

      // X axis: scale and draw:
      var x = d3.scaleLinear()
        .domain([0, 20])     // can use this instead of 1000 to have the max of data: d3.max(data, function(d) { return +d.price })
        .range([0, width]);
      chart10.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));

      // Y axis: initialization
      var y = d3.scaleLinear()
        .range([height, 0]);
      var yAxis = chart10.append("g")

      // A function that builds the graph for a specific value of bin
      function update(nBin) {

        // set the parameters for the histogram
        var histogram = d3.histogram()
          .value(function (d) { return d.perUnit; })   // I need to give the vector of value
          .domain(x.domain())  // then the domain of the graphic
          .thresholds(x.ticks(nBin)); // then the numbers of bins

        // And apply this function to data to get the bins
        var bins = histogram(data);


        // Add a tooltip div. Here I define the general feature of the tooltip: stuff that do not depend on the data point.
        // Its opacity is set to 0: we don't see it by default.
        var tooltip3 = d3.select("#Histogram")
          .append("div")
          .style("opacity", 0)
          .attr("class", "tooltip3")
          .style("background-color", "black")
          .style("color", "white")
          .style("border-radius", "5px")
          .style("padding", "10px")

        // A function that change this tooltip when the user hover a point.
        // Its opacity is set to 1: we can now see it. Plus it set the text and position of tooltip depending on the datapoint (d)
        var showTooltip = function (d) {
          tooltip3
            .transition()
            .duration(100)
            .style("opacity", 1)
          tooltip3
            .html("Range: " + d.x0 + " - " + d.x1)
            .style("left", (d3.mouse(this)[0] + 20) + "px")
            .style("top", (d3.mouse(this)[1]) + "px")
        }
        var moveTooltip = function (d) {
          tooltip3
            .style("left", (d3.mouse(this)[0] + 20) + "px")
            .style("top", (d3.mouse(this)[1]) + "px")
        }
        // A function that change this tooltip when the leaves a point: just need to set opacity to 0 again
        var hideTooltip = function (d) {
          tooltip3
            .transition()
            .duration(100)
            .style("opacity", 0)
        }



        // Y axis: update now that we know the domain
        y.domain([0, d3.max(bins, function (d) { return d.length; })]);   // d3.hist has to be called before the Y axis obviously
        yAxis
          .transition()
          .duration(1000)
          .call(d3.axisLeft(y));

        // Join the rect with the bins data
        var u = chart10.selectAll("rect")
          .data(bins)

        // Manage the existing bars and eventually the new ones:
        u
          .enter()
          .append("rect") // Add a new rect for each new elements
          .merge(u) // get the already existing elements as well
          .transition() // and apply changes to all of them
          .duration(1000)
          .attr("x", 1)
          .attr("transform", function (d) { return "translate(" + x(d.x0) + "," + y(d.length) + ")"; })
          .attr("width", function (d) { return x(d.x1) - x(d.x0) - 1; })
          .attr("height", function (d) { return height - y(d.length); })
          .style("fill", "#69b3a2")


        // If less bar in the new histogram, I delete the ones not in use anymore
        u
          .exit()
          .remove()

        chart10.selectAll("rect")
          .on("mouseover", showTooltip)
          .on("mousemove", moveTooltip)
          .on("mouseleave", hideTooltip)


      }


      // Initialize with 20 bins
      update(20)


      // Listen to the button -> update if user change it
      d3.select("#nBin").on("input", function () {
        update(+this.value);
      });

    });

  </script>

</body>

</html>